/* JsRender v1.0.0-beta: http://github.com/BorisMoore/jsrender and http://jsviews.com/jsviews */
(function(z,h,a){"use strict";if(h&&h.views||z.jsviews)return;var Q="v1.0.0-beta",c,v,o,H,k="{",l="{",d="}",i="}",r="^",fb=/^(?:null|true|false|\d[\d.]*|([\w$]+|\.|~([\w$]+)|#(view|([\w$]+))?)([\w$.^]*?)(?:[.[^]([\w$]+)\]?)?)$/g,cb=/(\()(?=\s*\()|(?:([([])\s*)?(?:([#~]?[\w$.^]+)?\s*((\+\+|--)|\+|-|&&|\|\||===|!==|==|!=|<=|>=|[<>%*!:?\/]|(=))\s*|([#~]?[\w$.^]+)([([])?)|(,\s*)|(\(?)\\?(?:(')|("))|(?:\s*(([)\]])(?=\s*\.|\s*\^)|[)\]])([([]?))|(\s+)/g,x=/\s*\n/g,N=/\\(['"])/g,P=/['"\\]/g,X=/\x08(~)?([^\x08]+)\x08/g,U=/^if\s/,Y=/<(\w+)[>\s]/,G=/[\x00`><"'&]/g,T=G,R=0,db=0,D={"&":"&amp;","<":"&lt;",">":"&gt;","\0":"&#0;","'":"&#39;",'"':"&#34;","`":"&#96;"},L="data-jsv-tmpl",y={},m={template:{compile:F},tag:{compile:V},helper:{},converter:{}},b={jsviews:Q,render:y,settings:{delimiters:B,debugMode:true,tryCatch:true},sub:{View:s,Error:u,tmplFn:A,parse:w,extend:g,error:n,syntaxError:f},_cnvt:W,_tag:ab,_err:function(a){return p.debugMode?"Error: "+(a.message||a)+". ":""}};function u(b,a){if(a&&a.onError)if(a.onError(b)===false)return;this.name="JsRender Error";this.message=b||"JsRender error"}function g(a,c){var b;a=a||{};for(b in c)a[b]=c[b];return a}(u.prototype=new Error).constructor=u;function B(b,a,c){if(!q.rTag||arguments.length){k=b?b.charAt(0):k;l=b?b.charAt(1):l;d=a?a.charAt(0):d;i=a?a.charAt(1):i;r=c||r;b="\\"+k+"(\\"+r+")?\\"+l;a="\\"+d+"\\"+i;o="(?:(?:(\\w+(?=[\\/\\s\\"+d+"]))|(?:(\\w+)?(:)|(>)|!--((?:[^-]|-(?!-))*)--|(\\*)))\\s*((?:[^\\"+d+"]|\\"+d+"(?!\\"+i+"))*?)";q.rTag=o+")";o=new RegExp(b+o+"(\\/)?|(?:\\/(\\w+)))"+a,"g");H=new RegExp("<.*>|([^\\\\]|^)[{}]|"+b+".*"+a)}return[k,l,d,i,r]}function bb(f,d){if(!d){d=f;f=a}var g,e,h,c,b=this,i=!d||d==="root";if(f){c=b.type===d?b:a;if(!c){g=b.views;if(b._.useKey){for(e in g)if(c=g[e].get(f,d))break}else for(e=0,h=g.length;!c&&e<h;e++)c=g[e].get(f,d)}}else if(i)while(b.parent.parent)c=b=b.parent;else while(b&&!c){c=b.type===d?b:a;b=b.parent}return c}function K(){var b=this.get("item");return b?b.index:a}K.depends=function(){return[this.get("item"),"index"]};function Z(e){var c,d=this,b=(d.ctx||{})[e];b=b===a?d.getRsc("helpers",e):b;if(b)if(typeof b==="function"){c=function(){return b.apply(d,arguments)};g(c,b)}return c||b}function W(f,d,c){var k,e,i,g=+c===c&&c,h=d.linkCtx;if(g)c=(g=d.tmpl.bnds[g-1])(d.data,d,b);i=c.args[0];if(f||g){e=h&&h.tag||{_:{inline:!h},tagName:f+":",flow:true,_is:"tag"};e._.bnd=g;if(h){h.tag=e;e.linkCtx=h;c.ctx=j(c.ctx,h.view.ctx)}e.tagCtx=c;c.view=d;e.ctx=c.ctx||{};delete c.ctx;d._.tag=e;f=f!=="true"&&f;if(f&&((k=d.getRsc("converters",f))||n("Unknown converter: {{"+f+":"))){e.depends=k.depends;i=k.apply(e,c.args)}i=g&&d._.onRender?d._.onRender(i,d,g):i;d._.tag=a}return i}function S(f,g){var e,d=this,c=b[f];e=c&&c[g];while(e===a&&d){c=d.tmpl[f];e=c&&c[g];d=d.parent}return e}function ab(o,f,h,l){var C,c,D,y,u,i,z,x,d,v,p,A,m,w,r="",s=+l===l&&l,k=f.linkCtx||0,q=f.ctx,B=h||f.tmpl,F=f._;if(o._is==="tag"){c=o;o=c.tagName}if(s)l=(A=B.bnds[s-1])(f.data,f,b);z=l.length;c=c||k.tag;for(i=0;i<z;i++){d=l[i];p=d.tmpl;p=d.content=p&&B.tmpls[p-1];h=d.props.tmpl;if(!i&&(!h||!c))m=f.getRsc("tags",o)||n("Unknown tag: {{"+o+"}}");h=h||(c?c._def:m).template||p;h=""+h===h?f.getRsc("templates",h)||e(h):h;g(d,{tmpl:h,render:t,index:i,view:f,ctx:j(d.ctx,q)});if(!c){if(m._ctr){c=new m._ctr;w=!!c.init;c.attr=c.attr||m.attr||a}else c={render:m.render};c._={inline:!k};if(k){k.attr=c.attr=k.attr||c.attr;k.tag=c;c.linkCtx=k}if(c._.bnd=A||k)c._.arrVws={};c.tagName=o;c.parent=u=q&&q.tag;c._is="tag";c._def=m}F.tag=c;d.tag=c;c.tagCtxs=l;if(!c.flow){v=d.ctx=d.ctx||{};D=c.parents=v.parentTags=q&&j(v.parentTags,q.parentTags)||{};if(u)D[u.tagName]=u;v.tag=c}}c.rendering={};for(i=0;i<z;i++){d=c.tagCtx=l[i];c.ctx=d.ctx;if(!i&&w){c.init(d,k,c.ctx);w=a}if(C=c.render)x=C.apply(c,d.args);r+=x!==a?x:d.tmpl?d.render():""}delete c.rendering;c.tagCtx=c.tagCtxs[0];c.ctx=c.tagCtx.ctx;if(c._.inline&&(y=c.attr)&&y!=="html")r=y==="text"?E.html(r):"";return s&&f._.onRender?f._.onRender(r,f,s):r}function s(i,j,b,o,n,k,l,m){var f,d,g,h=j==="array",e={key:0,useKey:h?0:1,id:""+db++,onRender:m,bnds:{}},c={data:o,tmpl:n,content:l,views:h?[]:{},parent:b,ctx:i,type:j,"get":bb,getIndex:K,getRsc:S,hlp:Z,_:e,_is:"view"};if(b){f=b.views;d=b._;if(d.useKey){f[e.key="_"+d.useKey++]=c;g=d.tag;e.bnd=h&&(!g||!!g._.bnd&&g)}else f.splice(e.key=c.index=k!==a?k:f.length,0,c);c.ctx=i||b.ctx}return c}function M(e){var c,b,a,d,f;for(c in m){d=m[c];if((f=d.compile)&&(b=e[c+"s"]))for(a in b)b[a]=f(a,b[a],e,c,d)}}function V(f,a,d){var c,b;if(typeof a==="function")a={depends:a.depends,render:a};else{if(b=a.template)a.template=""+b===b?e[b]||e(b):b;if(a.init!==false){c=a._ctr=function(){};(c.prototype=a).constructor=c}}if(d)a._parentTmpl=d;return a}function F(d,b,i,m,l,f){function k(a){if(""+a===a||a.nodeType>0){try{g=a.nodeType>0?a:!H.test(a)&&h&&h(z.document).find(a)[0]}catch(b){}if(g){a=g.getAttribute(L);d=d||a;a=e[a];if(!a){d=d||"_"+R++;g.setAttribute(L,d);a=e[d]=F(d,g.innerHTML,i,m,l,f)}}return a}}var c,g;b=b||"";c=k(b);f=f||(b.markup?b:{});f.tmplName=d;if(i)f._parentTmpl=i;if(!c&&b.markup&&(c=k(b.markup)))if(c.fn&&(c.debug!==b.debug||c.allowCode!==b.allowCode))c=c.markup;if(c!==a){if(d&&!i)y[d]=function(){return b.render.apply(b,arguments)};if(c.fn||b.fn){if(c.fn)if(d&&d!==c.tmplName)b=j(f,c);else b=c}else{b=I(c,f);A(c,b)}M(f);return b}}function I(f,d){var a,e=p.wrapMap||{},b=g({markup:f,tmpls:[],links:{},tags:{},bnds:[],_is:"template",render:t},d);if(!d.htmlTag){a=Y.exec(f);b.htmlTag=a?a[1].toLowerCase():""}a=e[b.htmlTag];if(a&&a!==e.div){b.markup=c.trim(b.markup);b._elCnt=true}return b}function O(c,d){function f(g,h,j){var l,i,m,k;if(g&&""+g!==g&&!g.nodeType&&!g.markup){for(m in g)f(m,g[m],h);return b}if(h===a){h=g;g=a}if(g&&""+g!==g){j=h;h=g;g=a}k=j?(j[e]=j[e]||{}):f;i=d.compile;if(l=q.onBeforeStoreItem)i=l(k,g,h,i)||i;if(!g)h=i(a,h);else if(h===null)delete k[g];else k[g]=i?(h=i(g,h,j,c,d)):h;if(h)h._is=c;(l=q.onStoreItem)&&l(k,g,h,i);return h}var e=c+"s";b[e]=f;m[c]=d}function t(f,h,d,o,y,k){var q,B,x,l,w,v,u,p,m,A,r,z,i,g=this,C=!g.attr||g.attr==="html",t="";if(o===true){u=true;o=0}if(g.tag){p=g;g=g.tag;A=g._;z=g.tagName;i=p.tmpl;h=j(h,g.ctx);m=p.content;if(p.props.link===false){h=h||{};h.link=false}d=d||p.view;f=f===a?d:f}else i=g.jquery&&(g[0]||n('Unknown template: "'+g.selector+'"'))||g;if(i){if(!d&&f&&f._is==="view")d=f;if(d){m=m||d.content;k=k||d._.onRender;if(f===d){f=d.data;y=true}h=j(h,d.ctx)}if(!d||d.data===a)(h=h||{}).root=f;if(!i.fn)i=e[i]||e(i);if(i){k=(h&&h.link)!==false&&C&&k;r=k;if(k===true){r=a;k=d._.onRender}if(c.isArray(f)&&!y){l=u?d:o!==a&&d||s(h,"array",d,f,i,o,m,k);for(q=0,B=f.length;q<B;q++){x=f[q];w=s(h,"item",l,x,i,(o||0)+q,m,k);v=i.fn(x,w,b);t+=l._.onRender?l._.onRender(v,w):v}}else{l=u?d:s(h,z||"data",d,f,i,o,m,k);if(A&&!g.flow)l.tag=g;t+=i.fn(f,l,b)}return r?r(t,l):t}}return""}function n(a){throw new b.sub.Error(a);}function f(a){n("Syntax error\n"+a)}function A(c,i,j,m){function l(a){a-=b;a&&d.push(c.substr(b,a).replace(x,"\\n"))}function h(a){a&&f('Unmatched or missing tag: "{{/'+a+'}}" in template:\n'+c)}function p(H,F,p,B,z,G,E,D,e,A,q,r){if(G){z=":";B="html"}A=A||j;var C,v,t=F&&[],s="",o="",u="",y=!A&&!z&&!E;p=p||z;l(r);b=r+H.length;if(D)n&&d.push(["*","\n"+e.replace(N,"$1")+"\n"]);else if(p){if(p==="else"){U.test(e)&&f('for "{{else if expr}}" use "{{else expr}}"');t=a[6];a[7]=c.substring(a[7],r);a=g.pop();d=a[3];y=true}if(e){e=e.replace(x," ");s=w(e,t,i).replace(X,function(c,b,a){if(b)u+=a+",";else o+=a+",";return""})}o=o.slice(0,-1);s=s.slice(0,-1);C=o&&o.indexOf("noerror:true")+1&&o||"";k=[p,B||!!m||"",s,y&&[],'params:"'+e+'",props:{'+o+"}"+(u?",ctx:{"+u.slice(0,-1)+"}":""),C,t||0];d.push(k);if(y){g.push(a);a=k;a[7]=b}}else if(q){v=a[0];h(q!==v&&v!=="else"&&q);a[7]=c.substring(a[7],r);a=g.pop()}h(!a&&q);d=a[3]}var k,n=i&&i.allowCode,e=[],b=0,g=[],d=e,a=[,,,e];c=c.replace(P,"\\$&");h(g[0]&&g[0][3].pop()[0]);c.replace(o,p);l(c.length);(b=e[e.length-1])&&h(""+b!==b&&+b[7]===b[7]&&b[0]);return J(e,j?c:i,j)}function J(C,d,i){var m,c,b,j,l,t,H,D,E,F,B,n,e,z,k,v,o,w,L,q,G,K,A,y,r,g=0,a="",s="",u={},M=C.length;if(""+d===d){k=i?'data-link="'+d.replace(x," ").slice(1,-1)+'"':d;d=0}else{k=d.tmplName||"unnamed";if(d.allowCode)u.allowCode=true;if(d.debug)u.debug=true;n=d.bnds;z=d.tmpls}for(m=0;m<M;m++){c=C[m];if(""+c===c)a+='\nret+="'+c+'";';else{b=c[0];if(b==="*")a+=""+c[1];else{j=c[1];l=c[2];w=c[3];t=c[4];s=c[5];L=c[7];if(!(K=b==="else")){g=0;if(n&&(e=c[6]))g=n.push(e)}if(A=b===":"){if(j)b=j==="html"?">":j+b;if(s){y="prm"+m;s="try{var "+y+"=["+l+"][0];}catch(e){"+y+'="";}\n';l=y}}else{if(w){v=I(L,u);v.tmplName=k+"/"+b;J(w,v);z.push(v)}if(!K){o=b;G=a;a=""}q=C[m+1];q=q&&q[0]==="else"}t+=",args:["+l+"]}";if(A&&e||j&&b!==">"){r=new Function("data,view,j,u"," // "+k+" "+g+" "+b+"\n"+s+"return {"+t+";");r.paths=e;r._ctxs=b;if(i)return r;B=1}a+=A?"\n"+(e?"":s)+(i?"return ":"ret+=")+(B?(B=0,F=true,'c("'+j+'",view,'+(e?(n[g-1]=r,g):"{"+t)+");"):b===">"?(D=true,"h("+l+");"):(E=true,"(v="+l+")!="+(i?"=":"")+'u?v:"";')):(H=true,"{tmpl:"+(w?z.length:"0")+","+t+",");if(o&&!q){a="["+a.slice(0,-1)+"]";if(i||e){a=new Function("data,view,j,u"," // "+k+" "+g+" "+o+"\nreturn "+a+";");if(e)(n[g-1]=a).paths=e;a._ctxs=b;if(i)return a}a=G+'\nret+=t("'+o+'",view,this,'+(g||a)+");";e=0;o=0}}}}a="// "+k+"\nvar j=j||"+(h?"jQuery.":"js")+"views"+(E?",v":"")+(H?",t=j._tag":"")+(F?",c=j._cnvt":"")+(D?",h=j.converters.html":"")+(i?";\n":',ret="";\n')+(p.tryCatch?"try{\n":"")+(u.debug?"debugger;":"")+a+(i?"\n":"\nreturn ret;\n")+(p.tryCatch?"\n}catch(e){return j._err(e);}":"");try{a=new Function("data,view,j,u",a)}catch(N){f("Compiled template code:\n\n"+a,N)}if(d)d.fn=a;return a}function w(g,b,o){function q(E,y,v,r,u,L,M,I,t,H,G,B,D,z,q,K,J,x,C){var s;u=u||"";v=v||y||G;r=r||I;t=t||K||"";function F(i,e,d,g,f,h,c){if(e){b&&!m&&b.push(r);if(e!=="."){var a=(d?'view.hlp("'+d+'")':g?"view":"data")+(c?(f?"."+f:d?"":g?"":"."+e)+(h||""):(c=d?"":g?f||"":e,""));a=a+(c?"."+c:"");return a.slice(0,9)==="view.data"?a.slice(5):a}}return i}if(L)f(g);else{if(b&&q){s=j[a];if(C.length-2>x-s){s=C.slice(s,x+1);q=l+":"+s+d;q=p[q]=p[q]||A(k+q+i,o,true);!q.paths&&w(s,q.paths=[],o);b.push({_jsvOb:q})}}return c?(c=!B,c?E:'"'):h?(h=!D,h?E:'"'):(v?(a++,j[a]=x++,v):"")+(J?a?"":n?(n=m=false,"\b"):",":M?(a&&f(g),n=r,m=r.charAt(0)==="~","\b"+r+":"):r?r.split("^").join(".").replace(fb,F)+(t?(e[++a]=true,r.charAt(0)!=="."&&(j[a]=x),t):u):u?u:z?(e[a--]=false,z)+(t?(e[++a]=true,t):""):H?(e[a]||f(g),","):y?"":(c=B,h=D,'"'))}}var n,m,p=o.links,e={},j={0:-1},a=0,h=false,c=false;return(g+" ").replace(cb,q)}function j(b,a){return b&&b!==a?a?g(g({},a),b):b:a&&g({},a)}function C(a){return D[a]||(D[a]="&#"+a.charCodeAt(0)+";")}for(v in m)O(v,m[v]);var e=b.templates,E=b.converters,gb=b.helpers,eb=b.tags,q=b.sub,p=b.settings;if(h){c=h;c.fn.render=t}else{c=z.jsviews={};c.isArray=Array&&Array.isArray||function(a){return Object.prototype.toString.call(a)==="[object Array]"}}c.render=y;c.views=b;c.templates=e=b.templates;eb({"else":function(){},"if":{render:function(c){var a=this,b=a.rendering.done||!c&&(arguments.length||!a.tagCtx.index)?"":(a.rendering.done=true,a.selected=a.tagCtx.index,a.tagCtx.render());return b},onUpdate:function(f,e,d){for(var a,b,c=0;(a=this.tagCtxs[c])&&a.args.length;c++){a=a.args[0];b=!a!==!d[c].args[0];if(!!a||b)return b}return false},flow:true},"for":{render:function(d){var b=this,f=b.tagCtx,g=!arguments.length,e="",h=g||0;if(!b.rendering.done){if(g)e=a;else if(d!==a){e+=f.render(d);h+=c.isArray(d)?d.length:1}if(b.rendering.done=h)b.selected=f.index}return e},onArrayChange:function(b,c){var a,e=this,d=c.change;if(this.tagCtxs[1]&&(d==="insert"&&b.target.length===c.items.length||d==="remove"&&!b.target.length||d==="refresh"&&!c.oldItems.length!==!b.target.length))this.refresh();else for(a in e._.arrVws){a=e._.arrVws[a];a.data===b.target&&a._.onArrayChange.apply(a,arguments)}b.done=true},flow:true},include:{flow:true},"*":{render:function(a){return a},flow:true}});E({html:function(b){return b!=a?String(b).replace(T,C):""},attr:function(b){return b!=a?String(b).replace(G,C):b===null?null:""},url:function(b){return b!=a?encodeURI(String(b)):b===null?null:""}});B()})(this,this.jQuery)